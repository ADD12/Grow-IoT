<template name="Device.DisplayComponent">
	{{#if notFound }}
		{{> NotFoundComponent }}
	{{else}}	
		{{#if Template.subscriptionsReady}}
	  	<div class="row dashboard">
				<div class="col-lg-4 margin-right">
					<h2>{{ device.thing.name }}	<span class="dropdown pull-right device-settings">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="glyphicon glyphicon-cog"></i><span class="caret nav-menu-icon"></span></a>
            <ul class="dropdown-menu">
              <!-- <li role="separator" class="divider"></li> -->
              <li><a href="#" class="rename">Rename device</a></li>
              <li><a href="#" class="remove">Delete device</a></li>
            </ul>
          </span></h2>
					<p>{{ device.thing.description }}</p>
					<p>{{ device.thing.type }}</p>

					{{#if device.onlineSince }}
						{{#each thing.actuators}}
							<h4>{{name}}</h4>
							<div>
								{{#each model.actions}}			
									<button class="btn command" data-call="{{call}}">{{name}}</button>
								{{/each}}
							</div>
						{{/each}}
					{{else}}
						<p><em>Not Online.</em></p>
					{{/if}}

					<hr/>

					{{#if eventLog}}
						<h4>Event log</h4>
						{{#each eventLog}}
							<p>{{body.event.name}}, {{body.timestamp}}</p>
						{{/each}}
					{{/if}}

					<!-- TODO: optionally show image if this thing supports images -->
					{{#if device.thing.imageURL}}
						<img src="{{device.thing.imageURL}}">
					{{/if}}
					<!-- TODO: add image if thing doesn't have one. -->
				  <!-- <p><button class="btn add-image">Add image</button></p> -->
				</div>

				<div class="col-lg-6 sensor-viz">
					{{#each thing.sensors}}
						<h6 class="text-center">{{name}}</h6>
						<!-- TODO: pass in property that we want to be graphing data for -->
						{{> Device.VisualizationComponent property=type chartType=chart}}
					{{/each}}
				</div>

			</div>
		{{else}}
			{{> LoaderComponent}}
		{{/if}}
	{{/if}}
</template>